
# TODO

x. Build a room

 - terrain permits
 - permits shop
 - modify terain parameters on build - maxMonsters etc
 - join rooms
 - create locations not just rooms

x. ARDNS name (write to discord after release)

8. Flirt (charm stat + mob history)
 - nurse
 - barmaid
 - bard

7. Hitpoints recover timer for everyone (up to 90%)

10. Stale players sleep

11. Get a room in the inn

22. Quests
 - Engine
 - Diablo style The Butcher (in the forest)
 - Forest Events 
   +/- charm
   +/- exp
   +/- gold
   (weapon upgrade / armour upgrade)
   heal
   rename monster
   build location permit
   explore forest permit
   
=== RELEASE

- spells / scrolls.

one word action scrolls:

- healing scroll
- snowball (-5 damage)

sequence spell:

- fireball spell
- teleport spell
- summon monster spell
- charm monster spell

examples:

heal
fear my face


eject ball of fire
fuck of






spell sequirenc



## Warlocks reference

Protection Spells

Shield (Gesture: P)
This spell protects the subject from all attacks from summoned monsters, from Magic Missile spells, and from stabs by Warlocks. The shield will block any number of such attacks but lasts for only one round. The shield protects the subject on the turn in which it is cast.

Remove Enchantment (gestures: PDWP)
Terminates the effects of all Enchantment Spells that have been cast on the subject including those that were cast on the subject in the same turn as the Remove Enchantment.
Effects that have already taken place are not cancelled, for example, the victim of a Blindness spell will not be able to see what their opponent's gestures were on the same turn that the Blindness is removed. All enchantments are removed and the caster may not pick and choose. Remove Enchantment also destroys any monster upon which it is cast, although the monster can still attack in that turn. Warlocks suffer no adverse effects from this spell, aside from the removal of their enchantments.

Magic Mirror (gestures: cw)
Any spell cast at a subject protected by Magic Mirror is reflected back upon the caster of the spell. The Magic Mirror protects only during the turn in which it was cast. The protection includes spells like Magic Missile and Lightning Bolt but does not include attacks by monsters or stabs from Warlocks. A Magic Mirror will not deflect spells cast by the Warlock that the mirror protects.
For the purpose of enchantments (eg. Charm Person), if a spell is reflected from a Magic Mirror, the original target becomes the caster, and gets to modify the gestures of the original caster.
The mirror is countered totally if a Counter Spell is cast on the subject in the same turn as the mirror. The mirror has no effect on spells which affect more than one person (such as Fire Storm).
In the unlikely event of a spell being cast such that it would reflect from more than one Magic Mirror (this requires the collusion of three Warlocks, or some help from a Delay Effect), the spell is reflected only once. See also the unexpected.

Counter Spell (gestures: WPP or WWS)
Any other spell cast upon the subject in the same turn has no effect. In the case of blanket spells, which affect more than one person, the subject of the Counter Spell alone is protected. For example, a Fire Storm spell could kill off a monster but not if a Counter Spell were cast on the monster in the same turn. Everyone else would be affected as usual by the Fire Storm unless they had their own protection.
Counter Spell works on all spells except Dispel Magic and Finger of Death, and also works as a Shield for its Target.

Dispel Magic (gestures: cDPW)
This spell acts as a combination of Counter Spell and Remove Enchantment, but its effects are universal rather than limited to the subject of the spell. It will stop any spell cast in the same turn from working (apart from another Dispel Magic spell), and will remove all enchantments from all beings before they have effect - except Blindness and Invisibility still prevent Warlocks from seeing Gestures that turn. In addition, all monsters are destroyed although they can attack that turn. Stab and Surrender still take effect, as they are not magical. As with a Counter Spell, Dispel Magic also acts as a Shield for its subject.

Cure Light Wounds (gestures: DFW)
The subject is cured by one Health point, up to a maximum of their starting health plus 1. If damage is inflicted in the same turn which would otherwise result in the subject's death (ie. if they are on 5 Health, and hit by a Lightning Bolt), the subject survives.

Cure Heavy Wounds (gestures: DFPW)
This spell is similar to Cure Light Wounds in effect but two points of damage are cured. This spell will also cure any diseases the subject might have at the time.

Summoning Spells

Summon Goblin (gestures: SFW)
This spell creates a goblin under the control of the target of the spell (or the target's controller, if the target is a monster). Note that the spell target becomes the controller, not the victim!
The goblin can attack immediately and its victim will be an opponent of its controller. It does one point of damage to its victim per turn and is destroyed after one point of damage is inflicted upon it. The summoning spell cannot be cast at an elemental, and if cast at something which doesn't exist, the spell has no effect.
See also rules regarding Monsters.

Summon Ogre (gestures: PSFW)
This spell is the same as Summon Goblin but the ogre created inflicts and is destroyed by two points of damage rather than one.

Summon Troll (gestures: FPSFW)
This spell is the same as Summon Goblin but the troll created inflicts and is destroyed by three points of damage rather than one.

Summon Giant (gestures: WFPSFW)
This spell is the same as Summon Goblin but the giant created inflicts and is destroyed by four points of damage rather than one.

Summon Ice Elemental (gestures: cSWWS)
This spell creates an ice elemental. Casting this spell will cause an elemental to be created, even if no target is specified.
See rules regarding Elementals for more details.

Summon Fire Elemental (gestures: cWSSW)
This spell creates a fire elemental. Casting this spell will cause an elemental to be created, even if no target is specified.
See rules regarding Elementals for more details.

Damaging Spells

Magic Missile (gestures: SD)
This spell creates a material object of hard substance which is hurled towards the subject of the spell and causes him one point of damage. The spell is thwarted by a Shield.

Finger Of Death (gestures: PWPFSSSD)
Kills the subject stone dead. This spell is so powerful that it is unaffected by a Counter Spell, although a Dispel Magic spell cast upon the final gesture will stop it.
The usual way to prevent being harmed by this spell is to prevent its casting using, for example, an Anti Spell.

Lightning Bolt (gestures: DFFDD)
The subject of this spell is hit by a bolt of lightning and sustains five points of damage. A Shield spell offers no defence.

Clap of Lightning (gestures: WDDc)
The subject of this spell is hit by a bolt of lightning and sustains five points of damage. A Shield spell offers no defence. This spell may only be cast once per Warlock in any one Battle. (Note - if it is blocked by a counter-spell, it still may not be cast again. If it is prevented by Dispel Magic, it can be cast again.)

Cause Light Wounds (gestures: WFP)
The subject of this spell is inflicted with two points of damage. A Shield spell offers no defence.

Cause Heavy Wounds (gestures: WPFD)
This has the same effect as Cause Light Wounds but inflicts three points of damage instead of two.

Fireball (gestures: FSSDD)
The subject of this spell is hit by a ball of fire and sustains five points of damage unless he is resistant to fire. If at the same time an Ice Storm prevails, the subject of the Fireball is instead not harmed by either spell, although the storm will affect others as normal. If directed at an ice elemental, the fireball will destroy it before it can attack.

Fire Storm (gestures: SWWc)
Everything not resistant to heat sustains 5 points of damage that turn. The spell cancels wholly, causing no damage, with either an Ice Storm or an ice elemental. It will destroy but not be destroyed by a fire elemental. Two Fire Storms act as one.
A Counter Spell will not prevent a Fire Storm, but it will protect the target of the Counter Spell.

Ice Storm (gestures: WSSc)
Everything not resistant to cold sustains 5 points of damage that turn. The spell cancels wholly, causing no damage, with either a Fire Storm or a fire elemental, and will cancel locally with a Fireball. It will destroy but not be destroyed by an ice elemental. Two Ice Storms act as one.
A Counter Spell will not prevent an Ice Storm, but it will protect the target of the Counter Spell.

Enchantment Spells

Amnesia (gestures: DPP)
If the subject of this spell is a Warlock, next turn he will repeat identically the gestures he made in the current turn.
If the subject of the spell is a monster or elemental, it forgets to attack in that round.
If the subject is simultaneously the subject of any of Paralysis, Confusion, Charm Person, Charm Monster, Fear or another Amnesia then none of the spells work.

Confusion (gestures: DSF)
If the subject of this spell is a Warlock, next turn he submits orders as usual. However, during resolution of the round, the server will randomly determine which hand is affected, and will randomly replace the ordered gesture with one of the eight possible gestures.
If the subject of the spell is a monster, it attacks a random victim that turn.
If the subject is also the subject of any of: Paralysis, Amnesia, another Confusion, Charm Person, Charm Monster, or Fear, none of the spells work.
In a Maladroit game, the Confusion spell is replaced with Maladroitness (gestures: DSF): If the subject of this spell is a Warlock, on the next round he must select only a single gesture, and will perform it with both hands (ie. if he selects P, he will surrender).
If the subject of the spell is a monster, its attack fails this round. The spell does not affect elementals. As with Confusion, it cancels with the same other enchantments.

Charm Person (gestures: PSDF)
Except for cancellation with other enchantments, this spell only affects Warlocks. The subject of the spell submits orders as normal, but the caster of the spell also submits a gesture for one of the subject's hands. The subject uses the gesture submitted by the caster for the next turn. If the subject is only so because of a reflection from a Magic Mirror the subject of the mirror assumes the role of caster and decides his opponent's gesture. If the subject is also the subject of any of Paralysis, Amnesia, Confusion, another Charm Person, Charm Monster, or Fear, none of the spells work.

Charm Monster (gestures: PSDD)
Except for cancellation with other enchantments, this spell only affects monsters (excluding elementals). Control of the monster is transferred to the caster of the spell (or retained by him) as of this turn, i.e. the monster will attack whosoever its new controller directs, from that turn onwards including that turn. Further charms are, of course, possible, transferring as before. If the subject of the charm is also the subject of any of: Paralysis, Amnesia, Confusion, Charm Person, another Charm Monster, or Fear none of the spells work.

Paralysis (gestures: FFF, or, in a ParaFDF game, FDF and FDFD)
If the subject of the spell is a Warlock, then for the following turn the caster selects one of the Warlock's hands and on that turn, the selected hand is paralysed. If the target Warlock already had a paralysed hand, paralysed by the same caster, the caster will not have the choice - the same hand will be paralysed again.
If the hand being paralysed is, at the time the spell is cast, performing a C, S or W it is instead paralysed into F, D or P respectively, for the next turn. Otherwise it will repeat the original position (this allows repeated stabs).
UPDATE: A "ParaFC" game paralyses F to C instead of C to F. See Challenges for how to start a ParaFC game.
If the subject of the spell is a monster or an elemental it simply does not attack in the turn in which the spell was cast.
If the subject of the spell is also the subject of any of Amnesia, Confusion, Charm Person, Charm Monster, Fear or another Paralysis, none of the spells work.

Fear (gestures: SWD)
If the subject of this spell is a Warlock, then on the turn following the casting of this spell, the subject cannot perform a C, D, F or S gesture (if they submit orders to make one of these gestures, their gesture will be replaced with '-' - no gesture).
If the subject of the spell is a monster (excluding elementals, which are unaffected), it will be too afraid to attack in that round.
If the subject is also the subject of Paralysis, Amnesia, Confusion, Charm Person, Charm Monster, or another Fear, then none of the spells work.

Anti Spell (gestures: SPFP)
On the turn following the casting of this spell, the subject cannot include any gestures made on or before this turn in a spell sequence and must restart a new spell from the beginning of that spell sequence. The spell does not affect spells which are cast on the same turn nor does it affect monsters.

Protection (gestures: WWP)
For this turn and the following two turns the subject of this spell is protected as if using a Shield spell, thus leaving both hands free. Concurrent Shield spells offer no further protection and compound Protection spells merely overlap offering no extra cover.

Resist Heat (gestures: WWFP)
The subject of this spell becomes totally resistant to all forms of heat attack (Fireball, Fire Storm and fire elementals). Only Dispel Magic or Remove Enchantment will terminate this resistance once started (although a Counter Spell will prevent it from working if cast at the subject at the same time as this spell). A Resist Heat cast directly on a fire elemental will destroy it before it can attack that turn, but there is no effect on ice elementals.

Resist Cold (gestures: SSFP)
The effects of this spell are identical to Resist Heat but resistance is to cold (Ice Storm and ice elementals) and it destroys ice elementals if they are the subject of the spell but doesn't affect fire elementals.

Disease (gestures: DSFFFc or, in a ParaFDF game, DSFDFc)
The subject of this spell immediately contracts a deadly (non contagious) disease which will kill him at the end of the sixth turn following the one upon which the spell is cast. A counter in the warlock's status bar indicates the number of turns he has left to live. When the counter reaches zero, the warlock dies. The malady is cured by Remove Enchantment or Cure Heavy Wounds or Dispel Magic in the meantime. If the subject of the spell is a monster, it dies immediately, but still gets to attack that turn.

Poison (gestures: DWWFWD)
This is the same as the disease spell except that Cure Heavy Wounds does not stop its effects.

Blindness (gestures: DWFFd or DFWFd)
For the next 3 turns not including the one in which the spell was cast, the subject is unable to see. If he is a Warlock, he cannot tell what his opponents' gestures are, although he will be informed of the effects of spells cast. He can control his monsters (he can say 'Attack that cursed Zarquon'), but he cannot direct his spells at things that he cannot see.
Blinded monsters (including Elementals) are instantly destroyed and cannot attack in that turn.

Invisibility (gestures: PPws)
This spell is similar to Blindness only the subject of the spell becomes invisible to his opponent and his monsters. His gestures cannot be seen by his opponents, and he cannot be attacked by any monsters or hit by any target-specific Spells, although they can be directed at him in case he becomes visible prematurely. Warlocks can still stab at him, with the same hope.
Any monster made invisible is destroyed due to the unstable nature of such magically created creatures, and doesn't get to attack that turn.

Haste (gestures: PWPWWc)
For the next 3 turns, the subject (but not his monsters if a Warlock) makes an extra set of gestures due to being speeded up. This takes effect immediately, so that immediately after the turn in which the Haste is cast the Hastened Warlock gets a "free" set of orders. Non-hastened Warlocks and monsters can see everything the hastened individual is doing.
Note that any spells cast during a non-hastened turn do not expire before the end of the extra hastened turn. This means that (for example) a Shield cast by a non-hastened Warlock would also protect him against a stab from a hastened Warlock in the hastened Warlock's free turn.
Note also that lasting spells cast during the hastened turn will begin to time out before the next turn. For example, a Shield cast during the free turn is not effective in the next.
Finally, note that enchantments are still effective during a Hasted turn, but, if the caster doesn't submit orders that turn, and the enchantment requires direction (as Paralysis and Charm Person do), then it will not take effect.

Time Stop (gestures: SPPFD or SPPc)
The subject of this spell takes an extra turn immediately at the end of the current turn, assuming they are still alive. During the extra turn, no-one can see the gestures he makes (though they can detect the effects of spells he casts). All beings have no resistance to any form of attack during a Time-Stopped turn, e.g. a Warlock halfway through the duration of a Protection spell can be harmed by a monster which has had its time stopped. Time stopped monsters attack whoever they were attacking in the round Time Stop is cast, and time stopped elementals affect everyone, resistance to heat or cold being immaterial. Also, enchantments which affect a Warlock's gestures are not effective during the time-stopped turn (though they still take effect afterwards). It's possible, therefore, to negate an enchantment by casting another on yourself during a time-stopped turn. Essentially, no persistent effects are relevant in a time-stopped turn. Also, a counter-spell or shield cast during a time-stopped turn will not last into the next turn. A time-stopped monster will attack before a surrender is recognised, though a time-stopped player will not.
Finally, if two Warlocks are both time-stopped in the same turn, they can both see the other.

Delay Effect (gestures: DWSSSP)
This spell only works if cast upon a Warlock. One of the next spells he completes, provided it is on one of the next 3 turns (not including the turn in which Delay Effect is cast), is "banked" until needed, i.e. it fails to work until its caster desires. The spell to be banked can be selected with a radio button while Delay Effect is active. Note that spells banked are those cast by the subject not those cast at him. The target of the spell is banked along with the spell itself (i.e. the complete effect of the spell, including target, is what gets saved). Remember that Surrender is not a spell. A Warlock may only have one spell banked at any one time. Banking a second spell will overwrite the first.
When a spell is banked, a Warlock can fire it by checking the 'Fire Banked Spell' option which will appear. A banked spell will not be removed by Dispel Magic or Remove Enchantment.
To counter a banked spell, you must cast the counter-spell on the turn the spell is fired - you cannot counter it on the turn in which it is banked.

Permanency (gestures: SPFPSDW)
This spell only works if cast upon a Warlock. Any spell he completes (i.e. completes the gestures of and casts), provided it is on one of the next 3 turns, and which falls into the category of "Enchantments" (except Anti Spell, Disease, Poison, or Time Stop) can have its effect made permanent. Delay Effect and Permanency can be made permanent, which prevents the three turn timeout, but they are still used up after being triggered.
Note that the person who has his spell made permanent does not necessarily have to make himself the subject of the spell. A Permanency spell cannot increase the duration of a spell which is being banked by Delay Effect.
Note that an attempt to make permanent an enchantment spell that is countered (or fails for any other reason) still uses up the Permanency. Note: Cast Permanency at yourself!
Permanency doesn't work with Charm Monster, as that spell has an instant effect rather than actually behaving as an enchantment.

Non Spells

Surrender (gestures: p)
This is not a spell and consequently cannot be cast at anyone. The Warlock making these gestures, irrespective of whether they terminate spells or not, surrenders and the contest is over. If the gestures do complete spells, those spells will be cast as usual - the surrender does not happen until the end of the round. The surrendering Warlock is deemed to have lost unless his gestures completed spells which killed all remaining opponents, in which case he is deemed to have won.
Two or more simultaneous surrenders count as a draw, in the same way as two or more simultaneous deaths - none of the Warlocks gain or lose any points, even those which died earlier in the Battle.
It is a skill for Warlocks to work their spells so that they never accidentally perform 2 P gestures simultaneously. It is too late to surrender on the turn you are killed - if you are killed as you make the surrender gesture, you will still die. However, if you live to the end of the turn, the referee will cure any diseases, poisons etc. in time for your next battle.

Stab (gesture: >)
This is not a spell but an attack which can be directed at any individual monster or Warlock (no spell need be selected, but a target should be, unless you want to attack a random opposing Warlock). Unless protected in that turn by a Shield spell or another spell with the same effect, the stabbed being suffers 1 point of damage. The Warlock only has one knife so can only stab with one hand in any turn - if a Warlock's gestures are such that he stabs with both hands, only the right hand will do damage. The stab cannot be reflected by a Magic Mirror or stopped by Dispel Magic (although its Shield effect *could* stop the stab). Clumsy Warlocks are allowed to stab themselves. Knives cannot be thrown.